"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ts = require("typescript");
const tslint = require("tslint");
class Rule extends tslint.Rules.AbstractRule {
    apply(sourceFile) {
        return this.applyWithFunction(sourceFile, walk);
    }
}
exports.Rule = Rule;
function walk(ctx) {
    const cb = (node) => {
        if (ts.isCallExpression(node)) {
            const child = node.expression;
            if (ts.isPropertyAccessExpression(child)
                && child.expression.getText() === 'process'
                && child.name.text === 'exit') {
                ctx.addFailureAtNode(node, 'Use \'process.exit()\' is not allowed.');
            }
        }
        return ts.forEachChild(node, cb);
    };
    return ts.forEachChild(ctx.sourceFile, cb);
}
