"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ts = require("typescript");
const tslint = require("tslint");
class Rule extends tslint.Rules.AbstractRule {
    apply(sourceFile) {
        return this.applyWithFunction(sourceFile, walk);
    }
}
exports.Rule = Rule;
function walk(ctx) {
    const cb = (node) => {
        if (ts.isCallExpression(node)) {
            if (node.expression.getText().endsWith('Sync')) {
                ctx.addFailureAtNode(node, `Unexpected sync method: ${node.expression.getText()}`);
            }
            if (ts.isPropertyAccessExpression(node.expression)
                && node.expression.name.getText() === 'sync') {
                ctx.addFailureAtNode(node, 'Unexpected sync method.');
            }
        }
        return ts.forEachChild(node, cb);
    };
    return ts.forEachChild(ctx.sourceFile, cb);
}
